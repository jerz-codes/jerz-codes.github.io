<!DOCTYPE html>
<html lang="pl-pl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ZajÄ™cia 14 (chyba?): Biedamatrix, cz.1 | jerz.codes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">ğŸ </a></li>
      
      <li><a href="/zapisy/">Zapisy</a></li>
      
      <li><a href="/faq/">FAQ</a></li>
      
      <li><a href="/kontakt/">Kontakt</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">ZajÄ™cia 14 (chyba?): Biedamatrix, cz.1</span></h1>

<h2 class="date">2023/02/14</h2>
</div>

<main>
<div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#krok-1-wyÅ›wietl-literkÄ™">Krok 1: wyÅ›wietl literkÄ™</a></li>
    <li><a href="#krok-2-przesuÅ„-literkÄ™-na-Å›rodek-ekranu">Krok 2: przesuÅ„ literkÄ™ na Å›rodek ekranu</a></li>
    <li><a href="#krok-3-zmieÅ„-kolor-litery-na-zielony">Krok 3: zmieÅ„ kolor litery na zielony</a></li>
    <li><a href="#krok-4-ukryj-kursor">Krok 4: ukryj kursor</a></li>
    <li><a href="#krok-5-spadajÄ…ca-literka">Krok 5: spadajÄ…ca literka</a></li>
    <li><a href="#krok-6-losowanie-litery">Krok 6: losowanie litery</a></li>
    <li><a href="#krok-7-spadanie-w-nieskoÅ„czonoÅ›Ä‡">Krok 7: spadanie w nieskoÅ„czonoÅ›Ä‡</a></li>
    <li><a href="#krok-8-wiele-literek">Krok 8: wiele literek</a></li>
    <li><a href="#krok-9-smugi-za-literkami">Krok 9: smugi za literkami</a></li>
    <li><a href="#co-dalej">Co dalej?</a></li>
  </ul>
</nav>
</div>
<p>Przez kilka ostatnich zajÄ™Ä‡ waÅ‚kowaliÅ›my program &ldquo;Gra w Statki&rdquo; i powtÃ³rki materiaÅ‚u. Jako Å¼e wszyscy (wÅ‚Ä…cznie z prowadzÄ…cym) odczuwajÄ… potrzebÄ™ zrobienia czegoÅ› innego, napiszemy dzisiaj naszÄ… pierwszÄ… animacjÄ™. WeÅºmiemy na warsztat animacjÄ™ znanÄ… z kultowego filmu Matrix:</p>
<img style="display: block; margin: 0 auto;" src="https://upload.wikimedia.org/wikipedia/commons/c/cc/Digital_rain_animation_medium_letters_shine.gif"/>
<p>Spodziewam siÄ™, Å¼e nasze pierwsze podejÅ›cie nie bÄ™dzie wyglÄ…daÅ‚o raczej biednie, stÄ…d nazwa programu: &ldquo;Biedamatrix&rdquo;.</p>
<h1 id="krok-1-wyÅ›wietl-literkÄ™">Krok 1: wyÅ›wietl literkÄ™</h1>
<p>Nasza animacja bÄ™dzie skÅ‚adaÄ‡ siÄ™ z literek, tak wiÄ™c pierwszym krokiem bÄ™dzie wyÅ›wietlenie pojedynczej literki. Ustalmy teÅ¼ rozmiar okna oraz wielkoÅ›Ä‡ czcionki:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">package</span> jerz.codes.animacje
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> jerz.codes.terminal.terminal
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> SZEROKOSC = <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> WYSOKOSC = <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() = terminal(
</span></span><span style="display:flex;"><span>    widthInTiles = SZEROKOSC,
</span></span><span style="display:flex;"><span>    heightInTiles = WYSOKOSC,
</span></span><span style="display:flex;"><span>    fontSize = <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;a&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><img src="krok1.png" alt=""></p>
<h1 id="krok-2-przesuÅ„-literkÄ™-na-Å›rodek-ekranu">Krok 2: przesuÅ„ literkÄ™ na Å›rodek ekranu</h1>
<p>Nasza litera nie zawsze bÄ™dzie znajdowaÄ‡ siÄ™ przy lewej krawÄ™dzi ekranu. Teoretycznie moglibyÅ›my przesunÄ…Ä‡ jÄ… w prawo przez wypisanie odpowiedniej iloÅ›ci spacji (np.: <code>print(&quot; &quot;.repeat(15)</code>), ale lepszym rozwiÄ…zaniem bÄ™dzie uÅ¼ycie odpowiedniej instrukcji Ansi, o ktÃ³rych byÅ‚a mowa na <a href="https://jerz.codes/posts/2022-12-20/">zajÄ™ciach nr 9</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Ansi</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// â€¦inne funkcje
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * Okno konsoli uÅ¼ywa nastÄ™pujÄ…cego ukÅ‚adu
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * wspÃ³Å‚rzÄ™dnych:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * (1, 1)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       *-----------------&gt; x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       V
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *       y
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">przesuÅ„Kursor</span>(x: Int, y: Int): String {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\u001B</span><span style="color:#e6db74">[</span><span style="color:#e6db74">$y</span><span style="color:#e6db74">;</span><span style="color:#e6db74">${x}</span><span style="color:#e6db74">H&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Stworzymy teÅ¼ dwie zmienne, Å¼eby przechowywaÄ‡ w nich wspÃ³Å‚rzÄ™dne literki.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() = terminal(
</span></span><span style="display:flex;"><span>    widthInTiles = SZEROKOSC,
</span></span><span style="display:flex;"><span>    heightInTiles = WYSOKOSC,
</span></span><span style="display:flex;"><span>    fontSize = <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> x = SZEROKOSC / <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesunKursor(x, y))
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;a&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><img src="krok2.png" alt=""></p>
<h1 id="krok-3-zmieÅ„-kolor-litery-na-zielony">Krok 3: zmieÅ„ kolor litery na zielony</h1>
<p>Nasze Biedamatrixowe literki powinny byÄ‡ zielone! Skorzystamy z kolejnej instrukcji ANSI, Å¼eby zmieniÄ‡ kolor czcionki:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() = terminal(
</span></span><span style="display:flex;"><span>    widthInTiles = SZEROKOSC,
</span></span><span style="display:flex;"><span>    heightInTiles = WYSOKOSC,
</span></span><span style="display:flex;"><span>    fontSize = <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> x = SZEROKOSC / <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.GREEN))
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(x, y))
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;a&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><img src="krok3.png" alt=""></p>
<h1 id="krok-4-ukryj-kursor">Krok 4: ukryj kursor</h1>
<p>Kwadratowy kursor znajdujÄ…cy siÄ™ za literkÄ… psuje nieco efekt wizualny. Na szczÄ™Å›cie jest instrukcja ANSI (<code>\u001b[?25l</code>), ktÃ³ra ukrywa kursor:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() = terminal(
</span></span><span style="display:flex;"><span>    widthInTiles = SZEROKOSC,
</span></span><span style="display:flex;"><span>    heightInTiles = WYSOKOSC,
</span></span><span style="display:flex;"><span>    fontSize = <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> x = SZEROKOSC / <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.ukryjKursor())
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.GREEN))
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(x, y))
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;a&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><img src="krok4.png" alt=""></p>
<h1 id="krok-5-spadajÄ…ca-literka">Krok 5: spadajÄ…ca literka</h1>
<p>Czas zaczÄ…Ä‡ animacjÄ™ naszej literki!</p>
<p>Tak naprawdÄ™, animacja komputerowa polega na wyÅ›wietlaniu kolejnych obrazÃ³w bardzo szybko, jeden po drugim. Tak wiÄ™c, jeÅ›li chcemy narysowaÄ‡ spadajÄ…cÄ… literkÄ™, musimy narysowaÄ‡ literkÄ™ na gÃ³rze ekranu, a nastÄ™pnie wyczyÅ›ciÄ‡ ekran i narysowaÄ‡ literkÄ™ o jedno pole niÅ¼ej, i powtarzaÄ‡ to, aÅ¼ literka znajdzie siÄ™ poza dolnÄ… krawÄ™dziÄ… ekranu.</p>
<p>W terminalowym ukÅ‚adzie wspÃ³Å‚rzÄ™dnych <code>y</code> to tak naprawdÄ™ numer wiersza na ekranie, tak wiÄ™c przy ruchu w dÃ³Å‚ bÄ™dziemy zwiÄ™kszaÄ‡ <code>y</code> o jeden przy kaÅ¼dym kroku:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> x = SZEROKOSC / <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#a6e22e">Ansi</span>.ukryjKursor())
</span></span><span style="display:flex;"><span>print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.GREEN))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// wyczyÅ›Ä‡ ekran
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    print(<span style="color:#a6e22e">Ansi</span>.wyczyÅ›Ä‡Ekran())
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// narysuj literkÄ™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(x, y))
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;a&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// zmieÅ„ wspÃ³Å‚rzÄ™dnÄ… y, aby w nastÄ™pnej klatce
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// animacji literka zostaÅ‚a narysowana niÅ¼ej 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    y <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// poczekaj 0.1s przed narysowaniem kolejnej klatki
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Thread</span>.sleep(<span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">while</span> (y <span style="color:#f92672">&lt;=</span> WYSOKOSC) <span style="color:#75715e">// powtarzaj, dopÃ³ki literka nie spadnie na sam dÃ³Å‚
</span></span></span></code></pre></div><p>Ukrywanie kursora i zmiana koloru czcionki wylÄ…dowaÅ‚a poza pÄ™tlÄ…, poniewaÅ¼ nie ma potrzeby robiÄ‡ tego wielokrotnie.</p>
<p>Po narysowaniu kaÅ¼dej klatki animacji musimy chwilkÄ™ odczekaÄ‡: w przeciwnym razie nasz program zakoÅ„czyÅ‚by siÄ™ w mgnieniu oka i nie dostrzeglibyÅ›my efektu ruchu literki. Wykorzystamy metodÄ™ <code>Thread.sleep(â€¦)</code>, Å¼eby kazaÄ‡ komputerowi czekaÄ‡ 100 milisekund.</p>
<h1 id="krok-6-losowanie-litery">Krok 6: losowanie litery</h1>
<p>W Matrixowej animacji literka podczas spadania caÅ‚y czas siÄ™ zmienia. Nasz Biedamatrix na razie pokazuje tylko literkÄ™ <code>a</code>, co nie wyglÄ…da rÃ³wnie imponujÄ…co. MoÅ¼emy nieco poprawiÄ‡ efekt, losujÄ…c literkÄ™ przy kaÅ¼dej klatce animacji:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> x = SZEROKOSC / <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> znaki = <span style="color:#e6db74">&#39;A&#39;</span><span style="color:#f92672">..</span><span style="color:#e6db74">&#39;Z&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#a6e22e">Ansi</span>.ukryjKursor())
</span></span><span style="display:flex;"><span>print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.GREEN))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> {
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.wyczyÅ›Ä‡Ekran())
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(x, y))
</span></span><span style="display:flex;"><span>    print(znaki.random())
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Thread</span>.sleep(<span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">while</span> (y <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">30</span>)
</span></span></code></pre></div><h1 id="krok-7-spadanie-w-nieskoÅ„czonoÅ›Ä‡">Krok 7: spadanie w nieskoÅ„czonoÅ›Ä‡</h1>
<p>Gdy litera spadnie poza dolnÄ… krawÄ™dÅº ekranu, moÅ¼emy &ldquo;teleportowaÄ‡&rdquo; jÄ… z powrotem do pierwszego wiersza i wylosowaÄ‡ nowÄ… wspÃ³Å‚rzÄ™dnÄ… <code>x</code>. DziÄ™ki temu nasza animacja bÄ™dzie mogÅ‚a dziaÅ‚aÄ‡ w nieskoÅ„czonej pÄ™tli:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> x = SZEROKOSC / <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> znaki = <span style="color:#e6db74">&#39;A&#39;</span><span style="color:#f92672">..</span><span style="color:#e6db74">&#39;Z&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#a6e22e">Ansi</span>.ukryjKursor())
</span></span><span style="display:flex;"><span>print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.GREEN))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> {
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.wyczyÅ›Ä‡Ekran())
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(x, y))
</span></span><span style="display:flex;"><span>    print(znaki.random())
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (y &gt; WYSOKOSC) {
</span></span><span style="display:flex;"><span>        x = (<span style="color:#ae81ff">1.</span>.SZEROKOSC).random()
</span></span><span style="display:flex;"><span>        y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Thread</span>.sleep(<span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>)
</span></span></code></pre></div><h1 id="krok-8-wiele-literek">Krok 8: wiele literek</h1>
<p>Czas na doÅ›Ä‡ trudny krok: animowanie wielu liter.</p>
<p>Gdy animowaliÅ›my jednÄ… literÄ™, mogliÅ›my po prostu uÅ¼yÄ‡ dwÃ³ch zmiennych <code>x</code> i <code>y</code>. Teraz bÄ™dziemy musieli przechowywaÄ‡ dwie wspÃ³Å‚rzÄ™dne dla wielu liter naraz. Po pierwsze, potrzebny bÄ™dzie &ldquo;klocek&rdquo;, ktÃ³ry moÅ¼e przechowaÄ‡ wszystkie dane dotyczÄ…ce litery:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Litera</span>(<span style="color:#66d9ef">var</span> x: Int, <span style="color:#66d9ef">var</span> y: Int)
</span></span></code></pre></div><p>Po drugie, potrzebna bÄ™dzie <code>List</code>a takich klockÃ³w:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> litery = mutableListOf&lt;Litera&gt;()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">42</span>) {
</span></span><span style="display:flex;"><span>    litery.add(Litera(x = (<span style="color:#ae81ff">1.</span>.SZEROKOSC).random(), y = <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>W gÅ‚Ã³wnej pÄ™tli kod, ktÃ³ry wykonywaliÅ›my dla pojedynczej litery, bÄ™dziemy musieli wykonaÄ‡ dla wszystkich liter na liÅ›cie:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">do</span> {
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.wyczyÅ›Ä‡Ekran())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (litera <span style="color:#66d9ef">in</span> litery) {
</span></span><span style="display:flex;"><span>        print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(litera.x, litera.y))
</span></span><span style="display:flex;"><span>        print(znaki.random())
</span></span><span style="display:flex;"><span>        litera.y <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (litera.y &gt; WYSOKOSC) {
</span></span><span style="display:flex;"><span>            litera.x = (<span style="color:#ae81ff">1.</span>.SZEROKOSC).random()
</span></span><span style="display:flex;"><span>            litera.y = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Thread</span>.sleep(<span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>)
</span></span></code></pre></div><p>Po powyÅ¼szych zmianach nasz Biedamatrix wyglÄ…da naprawdÄ™ biednie, poniewaÅ¼ nasze literki bÄ™dÄ… maszerowaÄ‡ w zwartym szeregu:</p>
<p><img src="krok8.png" alt=""></p>
<p>Dzieje siÄ™ tak, poniewaÅ¼ tworzÄ…c poczÄ…tkowÄ… listÄ™ literek uÅ¼yliÅ›my tego samego <code>y=1</code> dla wszystkich liter. ProponujÄ™ rozwiÄ…zaÄ‡ ten problem losujÄ…c poczÄ…tkowy <code>y</code> z przedziaÅ‚u <code>-WYSOKOSC..-1</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> litery = mutableListOf&lt;Litera&gt;()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">42</span>) {
</span></span><span style="display:flex;"><span>    litery.add(
</span></span><span style="display:flex;"><span>        Litera(
</span></span><span style="display:flex;"><span>            x = (<span style="color:#ae81ff">1.</span>.SZEROKOSC).random(), 
</span></span><span style="display:flex;"><span>            y = (-<span style="color:#a6e22e">WYSOKOSC</span><span style="color:#f92672">..</span>-<span style="color:#ae81ff">1</span>).random()
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>DziÄ™ki temu nasze literki bÄ™dÄ… &ldquo;rozrzucone&rdquo; po caÅ‚ym ekranie, a jednoczeÅ›nie przy starcie ekranu Å¼adna z liter nie bÄ™dzie widoczna.</p>
<p>Konieczna bÄ™dzie jeszcze jedna zmiana: nasz <code>terminal</code> nie lubi, gdy ktoÅ› prÃ³buje ustawiÄ‡ kursor na pozycji <code>y</code> mniejszej od 0. Musimy &ldquo;owinÄ…Ä‡&rdquo; kod rysujÄ…cy literkÄ™ w instrukcjÄ™ warunkowÄ…, ktÃ³ra sprawdzi, czy <code>y</code> jest poprawne:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (litera.y &gt; <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(litera.x, litera.y))
</span></span><span style="display:flex;"><span>    print(znaki.random())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Nasz Biedamatrix jest wciÄ…Å¼ biedny, ale zaczyna juÅ¼ byÄ‡ czymÅ› matrixopodobnym:</p>
<p><img src="krok8a.png" alt=""></p>
<h1 id="krok-9-smugi-za-literkami">Krok 9: smugi za literkami</h1>
<p>W prawdziwej Matrixowej animacji wszystkie literki zostawiajÄ… za sobÄ… gasnÄ…ce smugi. My na razie zrobimy coÅ› prostszego: nad kaÅ¼dÄ… literkÄ… bÄ™dziemy rysowaÄ‡ smugÄ™ o dÅ‚ugoÅ›ci 10 znakÃ³w. Literka bÄ™dzie rysowana biaÅ‚ym kolorem, smuga zielonym.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (litera.y &gt; <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// narysuj biaÅ‚Ä… literkÄ™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.WHITE))
</span></span><span style="display:flex;"><span>    print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(litera.x, litera.y))
</span></span><span style="display:flex;"><span>    print(znaki.random())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// narysuj zielonÄ… smugÄ™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    print(<span style="color:#a6e22e">Ansi</span>.kolorCzcionki(<span style="color:#a6e22e">Color</span>.GREEN))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (dy <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">10</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> ySmugi = litera.y - dy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (ySmugi &gt; <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            print(<span style="color:#a6e22e">Ansi</span>.przesuÅ„Kursor(litera.x, ySmugi))
</span></span><span style="display:flex;"><span>            print(znaki.random())
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Do rysowania smugi uÅ¼yjemy pÄ™tli <code>for</code> po przedziale <code>1..10</code>. PoniewaÅ¼ smuga rysowana jest powyÅ¼ej literki, bÄ™dziemy od wspÃ³Å‚rzÄ™dnej <code>litera.y</code> odejmowaÄ‡ wartoÅ›Ä‡ <code>dy</code>.</p>
<p>Podobnie jak w przypadku rysowania samej literki, musimy sprawdziÄ‡ wspÃ³Å‚rzÄ™dnÄ… <code>y</code> dla kaÅ¼dego elementu w smudze.</p>
<p><img src="krok9.png" alt=""></p>
<h1 id="co-dalej">Co dalej?</h1>
<p>Na nastÄ™pnych zajÄ™ciach postaramy siÄ™ ulepszyÄ‡ naszÄ… animacjÄ™!</p>
<p>Przede wszystkim, zaobserwowaliÅ›cie pewnie dziwne &ldquo;mruganie&rdquo; ekranu. Pozbycie siÄ™ tych &ldquo;glitchy&rdquo; to pierwsza rzecz, ktÃ³rÄ… bÄ™dziemy musieli siÄ™ zajÄ…Ä‡.</p>
<p>Po drugie, nasze smugi nie prezentujÄ… siÄ™ zbyt dobrze: znikajÄ… nagle, gdy litera dolatuje do krawÄ™dzi; caÅ‚a smuga narysowana jest jednym kolorem; literki w smudze zmieniajÄ… siÄ™ caÅ‚y czas, a powinny w 90% pozostawaÄ‡ takie same (popatrzcie na animacjÄ™ na poczÄ…tku tego wpisu).</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

