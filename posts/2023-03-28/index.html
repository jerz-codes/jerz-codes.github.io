<!DOCTYPE html>
<html lang="pl-pl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ZajÄ™cia 19: Wordle, cz. 2 â€“ sÅ‚ownik | jerz.codes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">ğŸ </a></li>
      
      <li><a href="/zapisy/">Zapisy</a></li>
      
      <li><a href="/faq/">FAQ</a></li>
      
      <li><a href="/kontakt/">Kontakt</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">ZajÄ™cia 19: Wordle, cz. 2 â€“ sÅ‚ownik</span></h1>

<h2 class="date">2023/03/28</h2>
</div>

<main>
<div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#sÅ‚ownik-wszystkich-piÄ™cioliterowcÃ³w">SÅ‚ownik wszystkich piÄ™cioliterowcÃ³w</a></li>
    <li><a href="#sÅ‚ownik-sensownych-piÄ™cioliterowcÃ³w">SÅ‚ownik sensownych piÄ™cioliterowcÃ³w</a></li>
  </ul>
</nav>
</div>
<hr>
<h1 id="sÅ‚ownik-wszystkich-piÄ™cioliterowcÃ³w">SÅ‚ownik wszystkich piÄ™cioliterowcÃ³w</h1>
<p>NastÄ™pnym krokiem przygotowaÅ„ do pisania klonu Wordle&rsquo;a bÄ™dzie utworzenie sÅ‚ownika do gry. Po pierwsze musimy byÄ‡ w stanie wykryÄ‡, czy wpisane przez gracza sÅ‚owo jest faktycznie sÅ‚owem, czy zlepkiem przypadkowych liter.</p>
<p>Jako bazy dla naszego sÅ‚ownika uÅ¼yjemy oficjalnego turniejowego sÅ‚ownika do Scrabble. Pobierzcie plik <a href="https://www.wordgamedictionary.com/twl06/download/twl06.txt">twl06.txt</a> i zapiszcie w katalogu z programem (uwaga dla Czepialskich CzytelnikÃ³w: tak, to nie jest najlepsze miejsce na przechowywanie tego rodzaju plikÃ³w, ale na dzisiejszych zajÄ™ciach skupimy siÄ™ na nieco innej rzeczy).</p>
<p>Wyrazy w Scrabble mogÄ… mieÄ‡ od 2 do 15 liter, ale nas interesujÄ… jedynie wyrazy piÄ™cioliterowe. Na szczÄ™Å›cie na poprzednich zajÄ™ciach poznaliÅ›my wszystkie narzÄ™dzia potrzebne do tego, Å¼eby je odfiltrowaÄ‡ i zapisaÄ‡ do nowego pliku:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> sÅ‚ownikScrabble = File(<span style="color:#e6db74">&#34;/dÅ‚uga/nudna/Å›cieÅ¼ka/twl06.txt&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> piÄ™cioliterowce: List&lt;String&gt; = sÅ‚ownikScrabble
</span></span><span style="display:flex;"><span>    .readLines()
</span></span><span style="display:flex;"><span>    .filter { <span style="color:#66d9ef">it</span>.length <span style="color:#f92672">==</span> <span style="color:#ae81ff">5</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> sÅ‚ownikWordle = File(sÅ‚ownikScrabble.parentFile, <span style="color:#e6db74">&#34;sÅ‚ownik.txt&#34;</span>)
</span></span><span style="display:flex;"><span>sÅ‚ownikWordle.writeText(
</span></span><span style="display:flex;"><span>    piÄ™cioliterowce.joinToString(separator = <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>PojawiÅ‚y siÄ™ tu dwie nowe rzeczy.</p>
<p>Po pierwsze, Å¼eby nie pisaÄ‡ po raz drugi <code>&quot;/dÅ‚uga/nudna/Å›cieÅ¼ka/&quot;</code>, wykorzystamy fakt, Å¼e sÅ‚ownik do Wordle&rsquo;a ma znaleÅºÄ‡ siÄ™ w tym samym katalogu, co sÅ‚ownik Scrabble&rsquo;a. Poprosimy <code>sÅ‚ownikScrabble</code> o podanie swojego &ldquo;rodzica&rdquo; (<code>parentFile</code>), czyli katalogu, w ktÃ³rym siÄ™ znajduje. NastÄ™pnie uÅ¼yjemy innego konstruktora <code>File</code>, Å¼eby stworzyÄ‡ <code>sÅ‚ownikWordle</code> na podstawie katalogu (obiektu typu <code>File</code>) i nazwy pliku podanej jako <code>String</code>.</p>
<p>Druga nowa rzecz to uÅ¼ycie funkcji <code>joinToString</code>. Wczytana i odfiltrowana lista wyrazÃ³w jest typu <code>List&lt;String&gt;</code>, a funkcja <code>writeText</code> oczekuje pojedynczego <code>String</code>&lsquo;a. MoÅ¼emy go &ldquo;zlepiÄ‡&rdquo; przy uÅ¼yciu pÄ™tli <code>for</code> i funkcji <code>appendLine()</code> na obiekcie <code>StringBuilder</code>, ale proÅ›ciej bÄ™dzie uÅ¼yÄ‡ funkcji <code>joinToString</code> &ldquo;dolepionej&rdquo; do <code>List</code>. Jak sama nazwa funkcji wskazuje, Å‚Ä…czy (ang. <em>join</em>) ona elementy <code>List</code>y do <code>String</code>a. Parametr <code>separator</code> okreÅ›la jakimi znakami majÄ… byÄ‡ oddzielone elementy listy. PoniewaÅ¼ chcemy, aby kaÅ¼dy wyraz wylÄ…dowaÅ‚ w osobnej linijce, przekaÅ¼emy tam znak nowej linii, czyli <code>\n</code>.</p>
<h1 id="sÅ‚ownik-sensownych-piÄ™cioliterowcÃ³w">SÅ‚ownik sensownych piÄ™cioliterowcÃ³w</h1>
<p>Wypiszmy na ekran losowych 10 wyrazÃ³w:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> sÅ‚ownikWordle = File(<span style="color:#960050;background-color:#1e0010">â€¦</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> piÄ™cioliterowce: List&lt;String&gt; = sÅ‚ownikWordle.readLines()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>repeat(<span style="color:#ae81ff">10</span>) {
</span></span><span style="display:flex;"><span>    println(piÄ™cioliterowce.random())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>UÅ¼yte przeze mnie <code>repeat</code> jest jednÄ… z <strong>funkcji wyÅ¼szego rzÄ™du</strong>, o ktÃ³rych byÅ‚a mowa na ostatnich zajÄ™ciach. Przyjmuje ona liczbÄ™ powtÃ³rzeÅ„ oraz blok kodu, ktÃ³ry ma siÄ™ wykonaÄ‡ kilka razy. Jest to zamiennik stosowanego przez nas do tej pory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">10</span>) { <span style="color:#75715e">/* zrÃ³b coÅ› */</span> }
</span></span></code></pre></div><p>Jest spora szansa, Å¼e wiÄ™kszoÅ›Ä‡ wypisanych haseÅ‚ bÄ™dzie bardzo egzotycznymi wyrazami:</p>
<p><img src="od-czapy.png" alt=""></p>
<p>(uwaga: sÅ‚ownik do Scrabble zawiera <strong>wszystkie</strong> wyrazy, wiÄ™c istnieje teÅ¼ niezerowa szansa, Å¼e wylosujÄ… siÄ™ jakieÅ› niecenzuralne plugastwa; proszÄ™ o dojrzaÅ‚e podejÅ›cie i zignorowanie tych bluzgÃ³w).</p>
<p>O ile powinniÅ›my pozwoliÄ‡ graczom na popisanie siÄ™ swoim sÅ‚ownictwem i wprowadzenie <code>exurb</code> albo <code>sonde</code> (cokolwiek miaÅ‚oby to znaczyÄ‡), to raczej nie chcemy, aby tego typu wyrazy byÅ‚y odgadywanymi hasÅ‚ami. Musimy przygotowaÄ‡ listÄ™ &ldquo;sensownych&rdquo; wyrazÃ³w. Napiszemy w tym celu program:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>wczytaj piÄ™cioliterowce z pliku fiveletter.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>przygotuj mutableList() na listÄ™ haseÅ‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pÄ™telka
</span></span><span style="display:flex;"><span>    wypisz ile mam wyrazÃ³w na liÅ›cie haseÅ‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    pokaÅ¼ na ekranie losowy wyraz piÄ™cioliterowy
</span></span><span style="display:flex;"><span>    wczytaj tekst z klawiatury
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    jeÅ›li tekst == &#39;T&#39;
</span></span><span style="display:flex;"><span>        dodaj wylosowany wyraz do listy haseÅ‚
</span></span><span style="display:flex;"><span>    jeÅ›li tekst == &#39;KONIEC!&#39;
</span></span><span style="display:flex;"><span>        zakoÅ„cz pÄ™telkÄ™
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>zapisz listÄ™ haseÅ‚ do pliku hasÅ‚a.txt
</span></span></code></pre></div><p>W trakcie pisania tego programu na zajÄ™ciach zwrÃ³ciliÅ›cie uwagÄ™ na kilka istotnych problemÃ³w.</p>
<p>Po pierwsze, byÄ‡ moÅ¼e ktoÅ› nie bÄ™dzie miaÅ‚ ochoty albo czasu na przygotowanie sÅ‚ownika haseÅ‚ za jednym razem. Dobrze by byÅ‚o, Å¼eby przy drugim uruchomieniu nie zaczynaÄ‡ od zera, tylko wczytaÄ‡ <code>&quot;hasÅ‚a.txt&quot;</code> stworzone przy pierwszym uruchomieniu. Tak wiÄ™c <code>przygotuj mutableList() na listÄ™ haseÅ‚</code> powinno wczytaÄ‡ <code>hasÅ‚a.txt</code> do <code>MutableList</code>. Funkcja <code>File.readlines()</code> zwraca niemutowalnÄ… <code>List</code>Ä™, tak wiÄ™c bÄ™dziecie musieli uÅ¼yÄ‡ jeszcze metody <code>.toMutableList()</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> hasÅ‚a = plikHaseÅ‚
</span></span><span style="display:flex;"><span>    .readLines()
</span></span><span style="display:flex;"><span>    .toMutableList()
</span></span></code></pre></div><p>Drugi problem jest taki, Å¼e jakiÅ› wyraz moÅ¼e wylosowaÄ‡ siÄ™ kilka razy. Jest to maÅ‚o prawdopodobne, ale moÅ¼e siÄ™ zdarzyÄ‡, wiÄ™c dobrze obsÅ‚uÅ¼yÄ‡ takÄ… sytuacjÄ™. Przy zapisywaniu haseÅ‚ musimy usunÄ…Ä‡ duplikaty. MoÅ¼emy do tego uÅ¼yÄ‡ funkcji <code>.distinct()</code>. Mieszko zasugerowaÅ‚ rÃ³wnieÅ¼ posortowanie alfabetyczne listy. TeÅ¼ da siÄ™ to zaÅ‚atwiÄ‡ jednÄ… linijkÄ… â€“ metoda <code>.sorted()</code> zwrÃ³ci nam posortowanÄ… listÄ™:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>plikHaseÅ‚.writeText(
</span></span><span style="display:flex;"><span>    hasÅ‚a
</span></span><span style="display:flex;"><span>        .distinct()
</span></span><span style="display:flex;"><span>        .sorted()
</span></span><span style="display:flex;"><span>        .joinToString(separator = <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div>
</main>

  <footer>
  
  
  </footer>
  </body>
</html>

