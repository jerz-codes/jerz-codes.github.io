<!DOCTYPE html>
<html lang="pl-pl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ZajÄ™cia 18: Wordle, cz. 1 â€“ przygotowania | jerz.codes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">ğŸ </a></li>
      
      <li><a href="/zapisy/">Zapisy</a></li>
      
      <li><a href="/faq/">FAQ</a></li>
      
      <li><a href="/kontakt/">Kontakt</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">ZajÄ™cia 18: Wordle, cz. 1 â€“ przygotowania</span></h1>

<h2 class="date">2023/03/21</h2>
</div>

<main>
<div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#obsÅ‚uga-plikÃ³w">ObsÅ‚uga plikÃ³w</a></li>
    <li><a href="#czy-funkcja-jest-obiektem">Czy funkcja jest obiektem?</a>
      <ul>
        <li><a href="#powtÃ³rka-z-typÃ³w-danych">PowtÃ³rka z typÃ³w danych</a></li>
        <li><a href="#funkcja-w-staÅ‚ej">Funkcja w staÅ‚ej</a></li>
        <li><a href="#typ-funkcji">Typ funkcji</a></li>
        <li><a href="#funkcja-jako-parametr">Funkcja jako parametr</a></li>
        <li><a href="#anonimowe-funkcje-i-wyraÅ¼enia-lambda">Anonimowe funkcje i wyraÅ¼enia lambda</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
<hr>
<p>NastÄ™pnym duÅ¼ym programem, ktÃ³ry napiszemy, bÄ™dzie klon gry Wordle:</p>
<p><img src="wordle-original.png" alt=""></p>
<p>Zapewne zajmie nam to kilka zajÄ™Ä‡. Musimy przygotowaÄ‡ sÅ‚ownik haseÅ‚ oraz listÄ™ dopuszczalnych sÅ‚Ã³w i dobrze byÅ‚oby przechowywaÄ‡ je w osobnym pliku, a nie w kodzie programu. Czyli musimy nauczyÄ‡ siÄ™ jak wczytywaÄ‡ dane z plikÃ³w.</p>
<p>BÄ™dziemy przeprowadzaÄ‡ sporo operacji na kolekcjach danych (tj. <code>List</code>ach i <code>Map</code>ach), wiÄ™c chciaÅ‚bym wam teÅ¼ pokazaÄ‡ lepszy sposÃ³b pracy z nimi. A Å¼eby zrozumieÄ‡, jak to wszystko dziaÅ‚a i Å‚Ä…czy siÄ™ ze sobÄ…, musimy znÃ³w chwilkÄ™ porozmawiaÄ‡ o funkcjach i obiektach.</p>
<p>Na koniec poznamy teÅ¼ inne tryby naszego terminala, Å¼eby nasza gra miaÅ‚a sympatyczniejszy interfejs uÅ¼ytkownika.</p>
<p>Tak wiÄ™c najbliÅ¼sze zajÄ™cia bÄ™dÄ… wyglÄ…daÅ‚y trochÄ™ w ten sposÃ³b:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/AbSehcT19u0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h1 id="obsÅ‚uga-plikÃ³w">ObsÅ‚uga plikÃ³w</h1>
<p>Na dobry poczÄ…tek, stwÃ³rzcie nowy program w pakiecie <code>jerz.codes.gry.wordle</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">package</span> jerz.codes.gry.wordle
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> jerz.codes.terminal.terminal
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() = terminal {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>NastÄ™pnie, korzystajÄ…c z panelu <code>Project</code> w IntelliJ, dodajcie w tym samym katalogu nowy plik o nazwie <code>slownik.txt</code>, a potem dodajcie do niego kilkanaÅ›cie wyrazÃ³w, np.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>TOOTH
</span></span><span style="display:flex;"><span>BOOTH
</span></span><span style="display:flex;"><span>RADIO
</span></span><span style="display:flex;"><span>RUDDY
</span></span><span style="display:flex;"><span>TORCH
</span></span><span style="display:flex;"><span>DREAM
</span></span><span style="display:flex;"><span>DEATH
</span></span><span style="display:flex;"><span>DESIRE
</span></span><span style="display:flex;"><span>DESPAIR
</span></span><span style="display:flex;"><span>DESTINY
</span></span><span style="display:flex;"><span>DESTRUCTION
</span></span><span style="display:flex;"><span>DELIRIUM
</span></span><span style="display:flex;"><span>DELIGHT
</span></span><span style="display:flex;"><span>PIRATE
</span></span><span style="display:flex;"><span>COD
</span></span><span style="display:flex;"><span>CARP
</span></span><span style="display:flex;"><span>SALMON
</span></span></code></pre></div><p>Do pracy z plikami w jÄ™zyku Kotlin sÅ‚uÅ¼y klasa <code>File</code>. Jeden z jej konstruktorÃ³w przyjmuje peÅ‚nÄ… Å›cieÅ¼kÄ™ do pliku w postaci <code>String</code>a. ÅšcieÅ¼ka to inaczej lokalizacja pliku, np.: <code>C:\katalog\plik.txt</code> na Windowsie, albo <code>/Users/johnnysilverhand/katalog/plik.txt</code> na Mac&rsquo;u.</p>
<p>W IntelliJ moÅ¼emy skopiowaÄ‡ Å›cieÅ¼kÄ™ pliku do systemowego schowka (czyli potem bÄ™dziemy mogli jÄ… wkleiÄ‡ w kodzie przez <code>Ctrl + V</code>/<code>Cmd + V</code>). W panelu <code>Project</code> trzeba kliknÄ…Ä‡ prawym przyciskiem myszy na plik, wybraÄ‡ opcjÄ™ <code>Copy Path/Reference</code>, a potem <code>Absolute Path</code>.</p>
<p>Skopiujcie Å›cieÅ¼kÄ™ do pliku <code>slownik.txt</code> i wklejcie w kodzie programu do konstruktora klasy <code>File</code> (trzeba teÅ¼ bÄ™dzie dodaÄ‡ odpowiedni <code>import</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> java.io.File
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">main</span>() = terminal {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> plikSÅ‚ownika = File(<span style="color:#e6db74">&#34;/Users/chalup/tmp/kotlin-starter-pack/src/main/kotlin/jerz/codes/gry/wordle/slownik.txt&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Tak stworzonego obiektu moÅ¼emy uÅ¼yÄ‡, Å¼eby przeczytaÄ‡ zawartoÅ›Ä‡ pliku:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> wyrazy: List&lt;String&gt; = plikSÅ‚ownika.readLines()
</span></span><span style="display:flex;"><span>println(<span style="color:#e6db74">&#34;PrzeczytaÅ‚em </span><span style="color:#e6db74">${wyrazy.size}</span><span style="color:#e6db74"> wyrazÃ³w.&#34;</span>)
</span></span><span style="display:flex;"><span>println(<span style="color:#e6db74">&#34;Pierwszy z nich to: </span><span style="color:#e6db74">${wyrazy.first()}</span><span style="color:#e6db74">.&#34;</span>)
</span></span></code></pre></div><p>Bardzo waÅ¼ne jest to, Å¼e samo stworzenie obiektu <code>File</code> nie powoduje utworzenia pliku, ani w ogÃ³le Å¼adnych zmian na dysku. Obiekt typu <code>File</code> nie zawiera teÅ¼ samej zawartoÅ›ci pliku. MoÅ¼ecie myÅ›leÄ‡ o tym jako o karteczce z adresem jakiegoÅ› miejsca: samo napisanie jakiegoÅ› adresu na karteczce nie powoduje, Å¼e nagle powstanie w tym miejscu dom. Natomiast majÄ…c takÄ… karteczkÄ™, moÅ¼ecie tam dojechaÄ‡. MoÅ¼ecie teÅ¼ sprawdziÄ‡ na mapie, czy taki adres faktycznie istnieje.</p>
<p>Inne funkcje, ktÃ³re mogÄ… siÄ™ nam przydaÄ‡ w najbliÅ¼szym czasie to:</p>
<ul>
<li><code>File.exists(): Boolean</code> - sprawdza, czy plik istnieje</li>
<li><code>File.writeText(text: String)</code> - nadpisuje zawartoÅ›Ä‡ pliku podanym <code>text</code>em</li>
</ul>
<h1 id="czy-funkcja-jest-obiektem">Czy funkcja jest obiektem?</h1>
<p>âš ï¸ <strong>UWAGA</strong>: ta sekcja jest doÅ›Ä‡ &ldquo;gÄ™sta&rdquo;. Nie starajcie siÄ™ tego przeczytaÄ‡ na telefonie na przerwie, proponujÄ™ usiÄ…Å›Ä‡ na spokojnie w domu przy laptopie. âš ï¸</p>
<h2 id="powtÃ³rka-z-typÃ³w-danych">PowtÃ³rka z typÃ³w danych</h2>
<p>ZrÃ³bmy sobie powtÃ³rkÄ™ z typÃ³w. Jakie znacie typy danych? Przypominam: typ danych to &ldquo;ksztaÅ‚t&rdquo; obiektu (liczba, znak, itp.). StwÃ³rzcie teraz w programie kilka staÅ‚ych, podajÄ…c ich typ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> zero: Int = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> tekst: String = <span style="color:#e6db74">&#34;test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> zakres: IntRange = <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> alfabet: CharRange = <span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">..</span><span style="color:#e6db74">&#39;z&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> znak: Char = <span style="color:#e6db74">&#39;!&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> lista: List&lt;String&gt; = listOf()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> sÅ‚ownik: Map&lt;String, String&gt; = mapOf()
</span></span></code></pre></div><h2 id="funkcja-w-staÅ‚ej">Funkcja w staÅ‚ej</h2>
<p>Wszystko, co jest obiektem, ma jakiÅ› typ. A funkcja? Czy funkcja teÅ¼ jest obiektem? Jaki jest jej typ? SprÃ³bujmy stworzyÄ‡ staÅ‚Ä… zawierajÄ…cÄ… funkcjÄ™:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> wyjec = <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">wyjec</span>() { println(<span style="color:#e6db74">&#34;Buu&#34;</span>) }
</span></span></code></pre></div><p>SÅ‚owo <code>wyjec</code> podkreÅ›lone jest czerwonym wÄ™Å¼ykiem, komunikat o bÅ‚Ä™dzie brzmi &ldquo;Anonymous functions with names are prohibited&rdquo;, i jest dostÄ™pny Quick Fix (czyli szybka poprawka dostÄ™pna po naciÅ›niÄ™ciu <code>Alt + Enter</code>). Po jego zastosowaniu dostajemy kod:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> wyjec = <span style="color:#66d9ef">fun</span>() { println(<span style="color:#e6db74">&#34;Buu&#34;</span>) }
</span></span></code></pre></div><p>Nic nie Å›wieci siÄ™ na czerwono, czyli to jest dziaÅ‚ajÄ…cy kod! Skoro <code>wyjec</code> jest funkcjÄ…, to powinniÅ›my mÃ³c z nim zrobiÄ‡ podstawowÄ… rzecz, ktÃ³rÄ… robi siÄ™ z funkcjami â€“ wywoÅ‚aÄ‡ jÄ…. Robi siÄ™ to dokÅ‚adnie w ten sam sposÃ³b co z innymi funkcjami, ktÃ³rych uÅ¼ywaliÅ›my do tej pory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>wyjec()     <span style="color:#75715e">// wypisane zostanie na ekran Buu 
</span></span></span></code></pre></div><h2 id="typ-funkcji">Typ funkcji</h2>
<p>A jaki funkcja ma typ? Zastosujemy kolejny Quick Fix, tym razem &ldquo;Specify type explicitly&rdquo; (czyli &ldquo;jednoznacznie podaj typ&rdquo;), dostÄ™pny po umieszczeniu kursora na nazwie staÅ‚ej. Po jego zastosowaniu do <code>wyjca</code> zostanie dodana informacja o typie:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> wyjec: () <span style="color:#f92672">-&gt;</span> Unit = <span style="color:#66d9ef">fun</span>() { println(<span style="color:#e6db74">&#34;Buu&#34;</span>) }
</span></span></code></pre></div><p>Czyli ta funkcja ma typ zapisany jako <code>() -&gt; Unit</code>. Na jednym przykÅ‚adzie doÅ›Ä‡ trudno jest rozszyfrowaÄ‡ znaczenie tego zapisu, sprÃ³bujmy stworzyÄ‡ jeszcze jednÄ… funkcjÄ™ przypisanÄ… do staÅ‚ej, przy czym tym razem niech ta funkcja przyjmuje parametry i zwraca jakiÅ› obiekt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> zliczaczLiter = <span style="color:#66d9ef">fun</span>(tekst: String): Int { <span style="color:#66d9ef">return</span> tekst.length }
</span></span></code></pre></div><p>Po uÅ¼yciu Quick Fixu &ldquo;Specify type explicitly&rdquo; dodany zostanie taki typ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> zliczaczLiter: (String) <span style="color:#f92672">-&gt;</span> Int = <span style="color:#66d9ef">fun</span>(tekst: String): Int { <span style="color:#66d9ef">return</span> tekst.length }
</span></span></code></pre></div><p>Czyli w zapisie typu funkcji rzeczy w nawiasie po lewej stronie strzaÅ‚ki oznaczajÄ… parametry przyjmowane przez tÄ™ funkcjÄ™, a po prawej stronie znajduje siÄ™ typ zwracany przez funkcjÄ™.</p>
<p>WrÃ³Ä‡my na chwilÄ™ do typu staÅ‚ej <code>wyjec</code>: <code>() -&gt; Unit</code>. Pusta para nawiasÃ³w jest jasna â€“ <code>wyjec</code> nie przyjmuje Å¼adnych parametrÃ³w. Ale czym jest <code>Unit</code> i czemu nie widzieliÅ›my tego wczeÅ›niej?</p>
<p><code>Unit</code> jest domyÅ›lnym typem zwracanym przez wszystkie funkcje, wiÄ™c jeÅ›li nie podaliÅ›my dla funkcji typu zwracanego, to tak naprawdÄ™ zwracaÅ‚a ona wÅ‚aÅ›nie <code>Unit</code>. OczywiÅ›cie nic nie stoi na przeszkodzie, Å¼eby jawnie powiedzieÄ‡, Å¼e nasza funkcja zwraca <code>Unit</code> (albo wywoÅ‚aÄ‡ <code>return Unit</code> zamiast po prostu <code>return</code>), ale jest to zbyteczne i IntelliJ bÄ™dzie sugerowaÅ‚ usuniÄ™cie tej informacji:</p>
<pre tabindex="0"><code>fun zwracamUnit(): Unit {
    return Unit
}
</code></pre><h2 id="funkcja-jako-parametr">Funkcja jako parametr</h2>
<p>Skoro funkcja jest obiektem, to moÅ¼na jÄ… przekazaÄ‡ do innej funkcji jako parametr. SprÃ³bujmy napisaÄ‡ funkcjÄ™, ktÃ³ra powtÃ³rzy kilka razy akcjÄ™ przekazanÄ… w parametrze:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">zrÃ³bCoÅ›KilkaRazy</span>(akcja: () <span style="color:#f92672">-&gt;</span> Unit) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.<span style="color:#ae81ff">8</span>) {
</span></span><span style="display:flex;"><span>        akcja()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>MoÅ¼emy przekazaÄ‡ tam np. funkcjÄ™ <code>wyjec</code>, Å¼eby nasz program wyÅ‚ wniebogÅ‚osy: <code>zrÃ³bCoÅ›KilkaRazy(wyjec)</code>.</p>
<p>Funkcje, ktÃ³re dostajÄ… inne funkcje jako parametr albo zwracajÄ… funkcjÄ™, nazywamy <strong>funkcjami wyÅ¼szego rzÄ™du</strong>. W bibliotece standardowej Kotlina (czyli w zestawie funkcji, ktÃ³re sÄ… dostÄ™pne razem z jÄ™zykiem), jest caÅ‚a masa uÅ¼ytecznych funkcji wyÅ¼szego rzÄ™du, ktÃ³re znacznie zmniejszajÄ… iloÅ›Ä‡ kodu potrzebnego do wykonania typowych operacji.</p>
<p>PrzykÅ‚adowo, zaÅ‚Ã³Å¼my, Å¼e mamy listÄ™ liczb, i chcemy uzyskaÄ‡ listÄ™ liczb dwukrotnie wiÄ™kszych (moÅ¼e wydawaÄ‡ siÄ™ wam to bzdurnym przykÅ‚adem, ale zapewniam was, caÅ‚a masa kodu, ktÃ³ry piszÄ™ na co dzieÅ„ w pracy to wÅ‚aÅ›nie przemaglowanie kolekcji danych).</p>
<p>Czyli dla kaÅ¼dego elementu listy chcemy go jakoÅ› przeksztaÅ‚ciÄ‡, a wynik dodaÄ‡ do nowej listy. Bez funkcji wyÅ¼szego rzÄ™du napisalibyÅ›my to tak:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = mutableListOf&lt;Int&gt;()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (liczba <span style="color:#66d9ef">in</span> lista) {
</span></span><span style="display:flex;"><span>    podwojoneLiczby.add(liczba * <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>MoÅ¼emy napisaÄ‡ sobie pomocniczÄ… funkcjÄ™ wyÅ¼szego rzÄ™du, ktÃ³ra bÄ™dzie przyjmowaÄ‡ funkcjÄ™ przeksztaÅ‚cajÄ…cÄ… element jako parametr:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">przemaglujLiczby</span>(lista: List&lt;Int&gt;, przeksztaÅ‚cenie: (Int) <span style="color:#f92672">-&gt;</span> Int): List&lt;Int&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> wynik = mutableListOf&lt;Int&gt;()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (liczba <span style="color:#66d9ef">in</span> lista) {
</span></span><span style="display:flex;"><span>        wynik.add(przeksztaÅ‚cenie(liczba))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> wynik
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>A nastÄ™pnie uÅ¼yÄ‡ jej w nastÄ™pujÄ…cy sposÃ³b:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwajacz = <span style="color:#66d9ef">fun</span>(liczba: Int): Int { <span style="color:#66d9ef">return</span> liczba * <span style="color:#ae81ff">2</span> }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = przemaglujLiczby(liczby, podwajacz)
</span></span></code></pre></div><p>A jeszcze lepiej nie pisaÄ‡ wÅ‚asnej funkcji do przeksztaÅ‚cania listy, tylko uÅ¼yÄ‡ bibliotecznej funkcji <code>map</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwajacz = <span style="color:#66d9ef">fun</span>(liczba: Int): Int { <span style="color:#66d9ef">return</span> liczba * <span style="color:#ae81ff">2</span> }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = liczby.map(podwajacz)
</span></span></code></pre></div><h2 id="anonimowe-funkcje-i-wyraÅ¼enia-lambda">Anonimowe funkcje i wyraÅ¼enia lambda</h2>
<p>Nie musimy naszego <code>podwajacza</code> przypisywaÄ‡ do staÅ‚ej, moÅ¼na ten sam kod wpisaÄ‡ w wywoÅ‚aniu funkcji <code>map</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = liczby.map(<span style="color:#66d9ef">fun</span>(liczba: Int): Int { <span style="color:#66d9ef">return</span> liczba * <span style="color:#ae81ff">2</span> })
</span></span></code></pre></div><p>Zamiast tworzyÄ‡ anonimowÄ… funkcjÄ™, moÅ¼emy uÅ¼yÄ‡ prostszego zapisu, tzw. <em>wyraÅ¼enia lambda</em>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = liczby.map({ liczba: Int <span style="color:#f92672">-&gt;</span> liczba * <span style="color:#ae81ff">2</span> })
</span></span></code></pre></div><p>WyglÄ…da to trochÄ™ jak wnÄ™trze funkcji, przy czym parametry i ciaÅ‚o funkcji oddzielone sÄ… strzaÅ‚kÄ…. Nie ma teÅ¼ sÅ‚owa kluczowego <code>return</code>: wartoÅ›ciÄ… zwracanÄ… przez ten kod jest wartoÅ›Ä‡ ostatniego wyraÅ¼enia.</p>
<p>IntelliJ podpowie nam, Å¼e moÅ¼emy pominÄ…Ä‡ okrÄ…gÅ‚e nawiasy przy wywoÅ‚aniu funkcji <code>map</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = liczby.map { liczba: Int <span style="color:#f92672">-&gt;</span> liczba * <span style="color:#ae81ff">2</span> }
</span></span></code></pre></div><p>OgÃ³lna zasada jest taka, Å¼e ostatni argument funkcji, ktÃ³ry jest wyraÅ¼eniem lambda, moÅ¼na zapisaÄ‡ poza okrÄ…gÅ‚ymi nawiasami wywoÅ‚ujÄ…cymi funkcjÄ™. A poniewaÅ¼ <code>map</code> przyjmuje tylko jeden argument, nawiasy okrÄ…gÅ‚e byÅ‚yby puste, i Kotlin zezwala na ich pominiÄ™cie.</p>
<p>W wyraÅ¼eniach lambda, ktÃ³re przyjmujÄ… tylko jeden parametr, moÅ¼na pominÄ…Ä‡ nazwÄ™ parametru. Wtedy w ciele wyraÅ¼enia bÄ™dzie dostÄ™pna zmienna <code>it</code>. Tak wiÄ™c nasz kod da siÄ™ uproÅ›ciÄ‡ jeszcze bardziej:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> podwojoneLiczby = liczby.map { <span style="color:#66d9ef">it</span> * <span style="color:#ae81ff">2</span> }
</span></span></code></pre></div><p>InnÄ… przydatnÄ… funkcjÄ… dostÄ™pnÄ… dla listy jest <code>filter</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">List</span>&lt;T&gt;.filter(predicate: (T) <span style="color:#f92672">-&gt;</span> Boolean): List&lt;T&gt;
</span></span></code></pre></div><p>Funkcja <code>filter</code> tworzy nowÄ… listÄ™, a nastÄ™pnie dodaje do niej wszystkie elementy ze starej listy, dla ktÃ³rych funkcja <code>predicate</code> zwrÃ³ci wartoÅ›Ä‡ <code>true</code>. Czyli &ldquo;odfiltrowuje&rdquo; ona listÄ™ danych. PrzykÅ‚adowo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> parzysteLiczby = liczby.filter { <span style="color:#66d9ef">it</span> % <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> }
</span></span></code></pre></div><p>Znacznie prostsze niÅ¼:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> liczby = listOf(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> parzysteLiczby = mutableListOf&lt;Int&gt;()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (liczba <span style="color:#66d9ef">in</span> liczby) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (liczba % <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        parzysteLiczby.add(liczba)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>UÅ¼ywanie wÅ‚aÅ›ciwych funkcji wyÅ¼szego rzÄ™du nie tylko skraca iloÅ›Ä‡ pisanego kodu, ale przede wszystkim uÅ‚atwia jego czytanie. JeÅ›li widzÄ™ wywoÅ‚anie <code>map</code>, wiem, czego mogÄ™ siÄ™ spodziewaÄ‡. JeÅ›li widzÄ™ pÄ™tlÄ™ po elementach listy, muszÄ™ dokÅ‚adnie wczytaÄ‡ siÄ™ w kod, Å¼eby zrozumieÄ‡, co ona faktycznie robi.</p>
<p>Na kolejnych zajÄ™ciach bÄ™dziemy poznawaÄ‡ kolejne funkcje tego typu, tak wiÄ™c upewnijcie siÄ™, Å¼e dobrze rozumiecie powyÅ¼szy materiaÅ‚!</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

